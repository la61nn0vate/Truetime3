
<!--sites-->
<div data-ng-controller="site_controller" data-ng-init="get_site_data()">
	<div class="container-fluid">
		<section class="content-header">
			<h1>
				Sites Details <small>Biometric Attendance System</small>
			</h1>
			<ol class="breadcrumb">
				<li><a href="#/"><i class="fa fa-dashboard"></i>Home</a></li>
				<li class="active">Sites details</li>
			</ol>
		</section>
		<br />
		<div class="container-fluid box">
			<div class="panel with-nav-tabs panel">
				<div class="panel-heading">
					<ul class="nav nav-tabs nav-justified">
						<li class="active"><a href="#site_tab1" data-toggle="tab">Site
								Details</a></li>
						<li><a href="#site_tab2" data-toggle="tab">Add Site</a></li>

						<li><a href="#site_tab3" data-toggle="tab">Manage Site</a></li>
					</ul>
				</div>
				<div class="panel-body">
					<div class="tab-content">
						<!--Site details-->
						<div class="tab-pane fade in active" id="site_tab1">
							<div data-ng-show="show_sites">
								<div
									class="input-group has-feedback has-feedback-left col-md-offset-10">
									<input type="text" class="form-control"
										placeholder="Type (eg, Name)" data-ng-model="searchsite" /> <span
										class="glyphicon glyphicon-search form-control-feedback"></span>
								</div>
								<br />
								<table
									class="table table-hover table-no-more table-responsive table-bordered table-striped">
									<thead>
										<tr>
											<th><a href=""
												data-ng-click="orderByField='S_no';reverse = !reverse">S.no.</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='site_name';reverse = !reverse">Site Name</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='site_location';reverse = !reverse">Site Location</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='number_of_shifts';reverse = !reverse">Number of Shifts</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='number_of_shifts';reverse = !reverse">Employees</a>
											</th>

										</tr>
									</thead>
									<tbody
										data-ng-repeat="site in sites | filter:searchsite | orderBy:orderByField:reverseSort">
										<tr>
											<td>{{$index+1}}</td>
											<td>{{site.site_name}}</td>
											<td>{{site.site_location}}</td>
											<td>{{site.number_of_shifts}}</td>
											<td><a href="" data-ng-click="see_details_of_site(site)"
												class="btn btn-info btn-sm">Details</a></td>
										</tr>
									</tbody>
								</table>
								<ul class="pagination" ng-show="sites.length > 0">
									<li ng-class="{disabled: pagination.currentPage == 0 }"><a
										ng-class="{disabled: pagination.currentPage == 0 }"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = 0)">&lt&lt</a>
									</li>
									<li ng-class="{disabled: pagination.currentPage == 0 }"><a
										ng-class="{disabled: pagination.currentPage == 0 }"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage - 1)">&lt</a>
									</li>

									<!-- ng-repeat creates a new scope. Need to specify the pagination.currentPage as $parent.pagination.currentPage -->
									<li ng-repeat="page in pagination.pageArray()"
										ng-class="{active: $parent.pagination.currentPage == page}"><a
										ng-click="$parent.pagination.currentPage = page">{{page +
											1}}</a></li>

									<li
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
										<a
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage + 1)">&gt</a>
									</li>
									<li
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
										<a
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.numberOfPages() - 1)">&gt&gt</a>
									</li>
								</ul>
							</div>

							<div data-ng-show="show_emp_of_site">
								<div>
									<a href="" data-ng-click="go_manage_show_site()"
										class="btn btn-warning pull-left"><i class="fa fa-th">
									</i><span>Go Back</span> </a>
								</div>
								<br>

								<div
									class="input-group has-feedback has-feedback-left col-md-offset-10">
									<input type="text" class="form-control"
										placeholder="Type (eg, Name)" data-ng-model="search_emp" /> <span
										class="glyphicon glyphicon-search form-control-feedback"></span>
								</div>
								<br />
								<table
									class="table table-hover  table-bordered table-striped table-condensed table-no-more">
									<thead>
										<tr>
											<th><a href=""
												data-ng-click="orderByField='S_no';reverse = !reverse">S.no.</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='employee_id';reverse = !reverse">Employee ID</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='name';reverse = !reverse">Name</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='gender';reverse = !reverse">Gender</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='site';reverse = !reverse">Site</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='site';reverse = !reverse">Managing Site</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='shift';reverse = !reverse">Shift</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='designation';reverse = !reverse">Designation</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='mobile_number';reverse = !reverse">Mobile Number </a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='email';reverse = !reverse">Email</a>
											</th>
										</tr>
									</thead>
									<tbody>
										<tr
											data-ng-repeat="emp in employees | filter:search_emp | orderBy:orderByField:reverseSort">
											<td>{{$index+1}}</td>
											<td>{{emp.employee_id}}</td>
											<td>{{emp.name}}</td>
											<td>{{emp.gender}}</td>
											<td>{{emp.siteName}}</td>
											<td>{{emp.managingSite}}</td>
											<td>{{emp.shiftName}}</td>
											<td>{{emp.designation}}</td>
											<td>{{emp.mobile_number}}</td>
											<td>{{emp.email}}</td>
										</tr>
									</tbody>
								</table>
								<ul class="pagination" ng-show="employees.length > 0">
									<li ng-class="{disabled: pagination.currentPage == 0 }"><a
										ng-class="{disabled: pagination.currentPage == 0 }"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = 0)">&lt&lt</a>
									</li>
									<li ng-class="{disabled: pagination.currentPage == 0 }"><a
										ng-class="{disabled: pagination.currentPage == 0 }"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage - 1)">&lt</a>
									</li>

									<!-- ng-repeat creates a new scope. Need to specify the pagination.currentPage as $parent.pagination.currentPage -->
									<li ng-repeat="page in pagination.pageArray()"
										ng-class="{active: $parent.pagination.currentPage == page}"><a
										ng-click="$parent.pagination.currentPage = page">{{page +
											1}}</a></li>

									<li
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
										<a
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage + 1)">&gt</a>
									</li>
									<li
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
										<a
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.numberOfPages() - 1)">&gt&gt</a>
									</li>
								</ul>

							</div>

						</div>
						<!--/Site details-->
						<!--Add Site details-->
						<div class="tab-pane fade" id="site_tab2">
							<div class="panel panel-info">
								<div style="padding-top: 30px" class="panel-body">
									<form id="add_site" name="add_site" class="form-horizontal"
										role="form">
										<label for="site_name">Site Name</label>
										<div style="margin-bottom: 25px" class="input-group"
											data-ng-class="{'has-error':add_site.site_name.$invalid && !add_site.site_name.$pristine}">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-user"></i></span> <input id="site_name"
												type="text" data-ng-model="site_name" class="form-control"
												name="site_name" required placeholder="Site Name">
										</div>
										<label for="site_location">Site Location</label>
										<div style="margin-bottom: 25px" class="input-group"
											data-ng-class="{'has-error':site_location.site_location.$invalid && !add_site.site_location.$pristine}">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-user"></i></span> <input
												id="site_location" type="text"
												data-ng-model="site_location" class="form-control"
												name="site_location" required placeholder="Site Location">
										</div>

										<label for="managerEmail">Manager Email</label>
										<div style="margin-bottom: 25px" class="input-group"
											data-ng-class="{'has-error':add_site.managerEmail.$invalid && !add_site.managerEmail.$pristine}">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-lock"></i></span> <input
												id="managerEmail" type="email" data-ng-model="managerEmail"
												class="form-control" name="managerEmail" required
												placeholder="Manager Email">
										</div>
										<p class="help-block"
											data-ng-show="add_site.managerEmail.$error.email">Email
											is in invalid Form.</p>

										<label for="address">Address</label>
										<div style="margin-bottom: 25px" class="input-group"
											data-ng-class="{'has-error':add_site.address.$invalid && !add_site.address.$pristine}">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-phone"></i></span> <input id="address"
												type="text" data-ng-model="address" class="form-control"
												required name="address" placeholder="Address">
										</div>
										<label for="cityorTown">City / Town</label>
										<div style="margin-bottom: 25px" class="input-group"
											data-ng-class="{'has-error':add_site.cityorTown.$invalid && !add_site.cityorTown.$pristine}">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-phone"></i></span> <input
												id="cityorTown" type="text" data-ng-model="cityOrTown"
												class="form-control" required name="cityorTown"
												placeholder="City / Town">
										</div>
										<label for="number_of_shifts">Number Of Shifts</label>
										<div style="margin-bottom: 25px" class="input-group"
											data-ng-class="{'has-error':add_site.number_of_shifts.$invalid && !add_site.number_of_shifts.$pristine}">
											<span class="input-group-addon"><i
												class="glyphicon glyphicon-briefcase"></i></span> <select
												id="number_of_shifts" data-ng-model="number_of_shifts"
												data-ng-change="add_shifts()" class="form-control" required
												name="number_of_shifts">
												<option ng-selected="true">Select Number Of Shifts</option>
												<option value="1">1</option>
												<option value="2">2</option>
												<option value="3">3</option>
												<option value="4">4</option>
												<option value="5">5</option>
												<option value="6">6</option>
												<option value="7">7</option>
												<option value="8">8</option>
												<option value="9">9</option>
												<option value="10">10</option>
											</select>																															
										</div>
										
										<div data-ng-repeat="shift in shifts">
											<h3>Shift {{$index+1}} Details</h3>

											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':add_site.shift_name.$invalid && !add_site.shift_name.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-user"></i></span> <input
													id="shift_name" data-ng-model="shift.shift_name"
													type="text" class="form-control" name="shift_name"
													value="" placeholder="Shift Name">
											</div>

											<div style="margin-bottom: 25px"
												class="input-group bootstrap-timepicker timepicker "
												data-ng-class="{'has-error':add_site.time_from.$invalid && !add_site.time_from.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-time"></i></span> <input
													id="time_from[$index]" type="time"
													class="form-control input-small"
													data-ng-model="shift.time_from" placeholder="Time From">
											</div>
											<div style="margin-bottom: 25px"
												class="input-group bootstrap-timepicker timepicker "
												data-ng-class="{'has-error':add_site.time_to.$invalid && !add_site.time_to.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-time"></i></span> <input
													id="time_to[$index]" type="time"
													class="form-control input-small"
													data-ng-model="shift.time_to" placeholder="Time To">
											</div>
										</div>

										<div style="margin-top: 10px" class="form-group">
											<!-- Button -->
											<div class="col-sm-12 controls centered">
												<button type="submit" class="btn btn-primary"
													data-ng-click="addsite()"
													data-ng-disabled="add_site.$invalid">Add Site And
													it's Shifts</button>
											</div>
										</div>

									</form>
								</div>
							</div>
						</div>

						<!-- /Add site details-->

						<!--Manage Site details-->
						<div class="tab-pane fade " id="site_tab3">
							<div data-ng-show="show_update">
								<div class="container-fluid">
									<div>
										<a href="" data-ng-click="go_manage()"
											class="btn btn-warning pull-right"><i class="fa fa-th">
										</i><span>Go Back</span> </a>
									</div>								
								</div>
								<br />
								<div class="panel panel-info">
									<div style="padding-top: 30px" class="panel-body">
										<form id="update_site" name="update_site"
											class="form-horizontal" role="form">
											<label for="u_site_name">Site Name</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_site_name.$invalid && !update_site.u_site_name.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-user"></i></span> <input
													id="u_site_name" type="text" data-ng-model="u_site_name"
													class="form-control" name="site_name" required
													placeholder="Site Name">
											</div>
											<label for="u_site_name">Site Location</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_site_location.$invalid && !update_site.u_site_location.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-user"></i></span> <input
													id="u_site_location" type="text"
													data-ng-model="u_site_location" class="form-control"
													name="site_location" required placeholder="Site Location">
											</div>
											<label for="u_site_name">Manager Email</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_managerEmail.$invalid && !update_site.u_managerEmail.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-lock"></i></span> <input
													id="u_managerEmail" type="email"
													data-ng-model="u_managerEmail" class="form-control"
													name="managerEmail" required placeholder="Manager Email">
											</div>
											<p class="help-block"
												data-ng-show="add_site.managerEmail.$error.email">Email
												is in invalid Form.</p>

											<label for="u_site_name">Address</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_address.$invalid && !update_site.u_address.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-phone"></i></span> <input
													id="u_address" type="text" data-ng-model="u_address"
													class="form-control" required name="address"
													placeholder="Address">
											</div>
											<label for="u_site_name">City/Town</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_cityorTown.$invalid && !update_site.u_cityorTown.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-phone"></i></span> <input
													id="u_cityorTown" type="text" data-ng-model="u_cityorTown"
													class="form-control" required name="cityorTown"
													placeholder="City / Town">
											</div>
											<label for="u_location">Location</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_locationData.$invalid && !update_site.u_locationData.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-phone"></i></span> <input
													id="u_locationData" type="text" data-ng-model="u_locationData"
													class="form-control" required name="locationData"
													placeholder="Location">
											</div>
											<label for="u_range">Range</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_rangeData.$invalid && !update_site.u_rangeData.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-phone"></i></span> <input
													id="u_rangeData" type="text" data-ng-model="u_rangeData"
													class="form-control" required name="rangeData"
													placeholder="Range">
											</div>
											<input id="pac-input" class="controls" type="text" placeholder="Search Box">
    										<div id="map"></div>
											<label for="u_number_of_shifts">Number Of Shifts</label>
											<div style="margin-bottom: 25px" class="input-group"
												data-ng-class="{'has-error':update_site.u_number_of_shifts.$invalid && !update_site.u_number_of_shifts.$pristine}">
												<span class="input-group-addon"><i
													class="glyphicon glyphicon-briefcase"></i></span> <select
													id="u_number_of_shifts" data-ng-model="u_number_of_shifts"
													convertToNumber data-ng-change="add_shifts()"
													class="form-control" required name="u_number_of_shifts">
													<option value="0">Select Number Of Shifts</option>
													<option value="1">1</option>
													<option value="2">2</option>
													<option value="3">3</option>
													<option value="4">4</option>
													<option value="5">5</option>
													<option value="6">6</option>
													<option value="7">7</option>
													<option value="8">8</option>
													<option value="9">9</option>
													<option value="10">10</option>
												</select>

											</div>

											<div style="margin-top: 10px" class="form-group">
												<!-- Button -->
												<div class="col-sm-12 controls centered">
													<button id="submitUpdateSite" type="submit"
														class="btn btn-primary" data-ng-click="updatesite()"
														data-ng-disabled="update_site.$invalid">Update
														Site</button>
												</div>
											</div>

										</form>
									</div>
								</div>
							</div>

							<div data-ng-show="show_manage">
								<div
									class="input-group has-feedback has-feedback-left col-md-offset-10">
									<input type="text" class="form-control"
										placeholder="Type (eg, Name)" data-ng-model="search_site" /> <span
										class="glyphicon glyphicon-search form-control-feedback"></span>
								</div>
								<br />
								<table
									class="table table-hover table-no-more table-responsive table-bordered table-striped">
									<thead>
										<tr>
											<th><a href=""
												data-ng-click="orderByField='S_no';reverse = !reverse">S.no.</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='site_name';reverse = !reverse">Site Name</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='site_location';reverse = !reverse">Site Location</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='number_of_shifts';reverse = !reverse">Number of Shifts</a>
											</th>
											<th><a href=""
												data-ng-click="orderByField='manage';reverse = !reverse">Manage</a>
											</th>

										</tr>
									</thead>
									<tbody
										data-ng-repeat="site in sites | filter:search_site | orderBy:orderByField:reverseSort">
										<tr>
											<td>{{$index+1}}</td>

											<td>{{site.site_name}}</td>
											<td>{{site.site_location}}</td>
											<td>{{site.number_of_shifts}}</td>
											<td><a href=""
												data-ng-click="del_site($index,site.websafeKey)"
												class="btn btn-danger"><span class="fa fa-trash-o">
												</span></a> <a href="" data-ng-click="manage_site(site)"
												class="btn btn-info"><span
													class="glyphicon glyphicon-edit"> </span></a></td>
										</tr>
									</tbody>
								</table>
								<ul class="pagination" ng-show="sites.length > 0">
									<li ng-class="{disabled: pagination.currentPage == 0 }"><a
										ng-class="{disabled: pagination.currentPage == 0 }"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = 0)">&lt&lt</a>
									</li>
									<li ng-class="{disabled: pagination.currentPage == 0 }"><a
										ng-class="{disabled: pagination.currentPage == 0 }"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage - 1)">&lt</a>
									</li>

									<!-- ng-repeat creates a new scope. Need to specify the pagination.currentPage as $parent.pagination.currentPage -->
									<li ng-repeat="page in pagination.pageArray()"
										ng-class="{active: $parent.pagination.currentPage == page}"><a
										ng-click="$parent.pagination.currentPage = page">{{page +
											1}}</a></li>

									<li
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
										<a
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage + 1)">&gt</a>
									</li>
									<li
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
										<a
										ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
										ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.numberOfPages() - 1)">&gt&gt</a>
									</li>
								</ul>
							</div>
						</div>
						<!--/Manage Site details-->
					</div>

				</div>
			</div>
		</div>
	</div>
</div>
<!--/sites-->